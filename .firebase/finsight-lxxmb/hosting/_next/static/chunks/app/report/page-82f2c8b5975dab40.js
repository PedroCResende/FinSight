(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[81],{14636:(e,t,r)=>{"use strict";r.d(t,{AM:()=>l,Wv:()=>d,hl:()=>i});var a=r(95155),s=r(12115),n=r(98176),o=r(59434);let l=n.bL,d=n.l9,i=s.forwardRef((e,t)=>{let{className:r,align:s="center",sideOffset:l=4,...d}=e;return(0,a.jsx)(n.ZL,{children:(0,a.jsx)(n.UC,{ref:t,align:s,sideOffset:l,className:(0,o.cn)("z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2",r),...d})})});i.displayName=n.UC.displayName},16127:(e,t,r)=>{"use strict";r.r(t),r.d(t,{default:()=>G});var a=r(95155),s=r(12115),n=r(35695),o=r(27600),l=r(83343),d=r(84713),i=r(90540),c=r(66695),u=r(85127),m=r(26126),f=r(24944),x=r(28039),h=r(98383),g=r(50172),p=r(31949),b=r(519),j=r(43380),y=r(99145),v=r(89876),N=r(81203),w=r(68718),k=r(30285),A=r(24355),R=r(26597),_=r(52699),C=r.n(_),P=r(78126),M=r.n(P);function S(){let{user:e}=(0,o.A)(),t=(0,n.useSearchParams)(),r=(0,n.useRouter)(),[_,P]=(0,s.useState)(null),[S,G]=(0,s.useState)(!0),[D,T]=(0,s.useState)(null),[F,I]=(0,s.useState)(!1),H=async()=>{let e=document.getElementById("report-content");if(!e)return void T("N\xe3o foi poss\xedvel encontrar o elemento do relat\xf3rio para gerar o PDF.");I(!0);try{let t=await C()(e,{scale:2,useCORS:!0}),r=t.toDataURL("image/png"),a=new R.Ay({orientation:"p",unit:"mm",format:"a4"}),s=a.internal.pageSize.getWidth(),n=a.internal.pageSize.getHeight(),o=t.width,l=t.height,d=s/(o/l),i=d,c=0;for(a.addImage(r,"PNG",0,c,s,d),i-=n;i>0;)c=i-d,a.addPage(),a.addImage(r,"PNG",0,c,s,d),i-=n;a.save("relatorio-finsight.pdf")}catch(e){console.error("Erro ao gerar PDF:",e),T("Ocorreu um erro ao gerar o arquivo PDF.")}finally{I(!1)}};(0,s.useEffect)(()=>{if(!e)return;let r=t.get("from"),a=t.get("to");if(!r||!a){T("Per\xedodo de datas inv\xe1lido. Por favor, gere o relat\xf3rio novamente a partir do dashboard."),G(!1);return}let s=(0,l.H)(r),n=(0,l.H)(a);(async()=>{G(!0),T(null);try{let[t,r,a]=await Promise.all([(0,A.oV)(e.uid,s,n),(0,A.bW)(e.uid),(0,A.DX)(e.uid)]),o=r.map(e=>({...e,icon:(0,h.AI)(e.icon)})),l={transactions:t,categories:o,goals:a,dateRange:{from:s,to:n},generatedAt:new Date().toISOString()};P(l)}catch(e){console.error("ERRO AO BUSCAR DADOS DO RELAT\xd3RIO:",e),T("N\xe3o foi poss\xedvel carregar os dados do relat\xf3rio. Verifique o console para mais detalhes.")}finally{G(!1)}})()},[e,t,r]);let B=(0,s.useMemo)(()=>{if(!_)return{income:0,expenses:0,balance:0};let e=_.transactions.filter(e=>e.amount>0).reduce((e,t)=>e+t.amount,0),t=_.transactions.filter(e=>e.amount<0).reduce((e,t)=>e+t.amount,0);return{income:e,expenses:Math.abs(t),balance:e+t}},[_]),E=e=>e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"}),O=e=>(0,d.GP)(e,"dd 'de' MMMM 'de' yyyy",{locale:i.F});return S?(0,a.jsxs)("div",{className:"flex flex-col min-h-screen w-full items-center justify-center bg-background p-4 text-center",children:[(0,a.jsx)(g.A,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"Carregando dados do relat\xf3rio..."}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Isso pode levar alguns segundos."})]}):D?(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center h-screen text-center p-4",children:[(0,a.jsx)(p.A,{className:"h-16 w-16 mb-4 text-destructive"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Erro ao Gerar Relat\xf3rio"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:D}),(0,a.jsx)(k.$,{onClick:()=>r.push("/dashboard"),className:"mt-4",children:"Voltar para o Dashboard"})]}):_?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(M(),{children:(0,a.jsx)("title",{children:"Relat\xf3rio Financeiro - FinSight"})}),(0,a.jsx)("header",{className:"sticky top-0 z-50 bg-background/95 backdrop-blur supports-[backdrop-filter]:bg-background/60 p-4 no-print",children:(0,a.jsxs)("div",{className:"container max-w-7xl mx-auto flex items-center justify-between",children:[(0,a.jsx)("h1",{className:"text-xl font-semibold",children:"Visualiza\xe7\xe3o de Relat\xf3rio"}),(0,a.jsx)(k.$,{onClick:H,disabled:F,children:F?(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(g.A,{className:"mr-2 h-4 w-4 animate-spin"}),"Gerando..."]}):(0,a.jsxs)(a.Fragment,{children:[(0,a.jsx)(w.A,{className:"mr-2 h-4 w-4"}),"Baixar PDF"]})})]})}),(0,a.jsx)(()=>{var e,t;return(0,a.jsxs)("div",{id:"report-content",className:"bg-background text-foreground min-h-screen p-4 sm:p-6 md:p-8 report-container",children:[(0,a.jsx)("header",{className:"mb-8",children:(0,a.jsxs)("div",{className:"flex justify-between items-center",children:[(0,a.jsxs)("div",{className:"flex items-center gap-4",children:[(0,a.jsx)(b.A,{className:"h-10 w-10 text-primary"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("h1",{className:"text-3xl font-bold",children:"Relat\xf3rio Financeiro"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:["Gerado em: ",O(new Date(_.generatedAt))]})]})]}),(0,a.jsxs)("div",{className:"text-right",children:[(0,a.jsx)("h2",{className:"font-semibold",children:"Per\xedodo do Relat\xf3rio"}),(0,a.jsxs)("p",{className:"text-muted-foreground",children:[(null==(e=_.dateRange)?void 0:e.from)?O(_.dateRange.from):"In\xedcio"," \xe0 ",(null==(t=_.dateRange)?void 0:t.to)?O(_.dateRange.to):"Fim"]})]})]})}),(0,a.jsxs)("main",{className:"space-y-8",children:[(0,a.jsxs)(c.Zp,{children:[(0,a.jsx)(c.aR,{children:(0,a.jsx)(c.ZB,{children:"Resumo Financeiro do Per\xedodo"})}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:[(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-green-50 dark:bg-green-900/20 border border-green-200 dark:border-green-800 flex items-center gap-4",children:[(0,a.jsx)(j.A,{className:"h-8 w-8 text-green-600 dark:text-green-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-green-800 dark:text-green-300",children:"Total de Entradas"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-green-700 dark:text-green-200",children:E(B.income)})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-red-50 dark:bg-red-900/20 border border-red-200 dark:border-red-800 flex items-center gap-4",children:[(0,a.jsx)(y.A,{className:"h-8 w-8 text-red-600 dark:text-red-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-red-800 dark:text-red-300",children:"Total de Sa\xeddas"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-red-700 dark:text-red-200",children:E(B.expenses)})]})]}),(0,a.jsxs)("div",{className:"p-4 rounded-lg bg-blue-50 dark:bg-blue-900/20 border border-blue-200 dark:border-blue-800 flex items-center gap-4",children:[(0,a.jsx)(v.A,{className:"h-8 w-8 text-blue-600 dark:text-blue-400"}),(0,a.jsxs)("div",{children:[(0,a.jsx)("p",{className:"text-sm text-blue-800 dark:text-blue-300",children:"Saldo Final"}),(0,a.jsx)("p",{className:"text-2xl font-bold text-blue-700 dark:text-blue-200",children:E(B.balance)})]})]})]})})]}),(0,a.jsxs)("div",{className:"grid grid-cols-1 lg:grid-cols-5 gap-8",children:[(0,a.jsx)("div",{className:"lg:col-span-2",children:(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Distribui\xe7\xe3o de Despesas"}),(0,a.jsx)(c.BT,{children:"Como seus gastos foram distribu\xeddos por categoria."})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsx)(x.b,{transactions:_.transactions,categories:_.categories})})]})}),(0,a.jsx)("div",{className:"lg:col-span-3",children:(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Progresso das Metas"}),(0,a.jsx)(c.BT,{children:"Acompanhamento de suas metas financeiras."})]}),(0,a.jsx)(c.Wu,{className:"space-y-4",children:_.goals.length>0?_.goals.map(e=>(0,a.jsxs)("div",{children:[(0,a.jsxs)("div",{className:"flex justify-between mb-1",children:[(0,a.jsxs)("p",{className:"font-semibold flex items-center gap-2",children:[(0,a.jsx)(N.A,{className:"h-4 w-4 text-primary"})," ",e.title]}),(0,a.jsx)(m.E,{variant:"completed"===e.status?"default":"secondary",children:"completed"===e.status?"Conclu\xedda":"Em Andamento"})]}),(0,a.jsx)(f.k,{value:e.savedAmount/e.targetAmount*100}),(0,a.jsxs)("div",{className:"flex justify-between text-sm text-muted-foreground mt-1",children:[(0,a.jsx)("span",{children:E(e.savedAmount)}),(0,a.jsx)("span",{children:E(e.targetAmount)})]})]},e.id)):(0,a.jsx)("p",{className:"text-muted-foreground text-center py-8",children:"Nenhuma meta cadastrada."})})]})})]}),(0,a.jsxs)(c.Zp,{children:[(0,a.jsxs)(c.aR,{children:[(0,a.jsx)(c.ZB,{children:"Detalhe das Transa\xe7\xf5es"}),(0,a.jsx)(c.BT,{children:"Todas as transa\xe7\xf5es registradas no per\xedodo selecionado."})]}),(0,a.jsx)(c.Wu,{children:(0,a.jsxs)(u.XI,{children:[(0,a.jsx)(u.A0,{children:(0,a.jsxs)(u.Hj,{children:[(0,a.jsx)(u.nd,{children:"Data"}),(0,a.jsx)(u.nd,{children:"Descri\xe7\xe3o"}),(0,a.jsx)(u.nd,{children:"Categoria"}),(0,a.jsx)(u.nd,{className:"text-right",children:"Valor"})]})}),(0,a.jsx)(u.BF,{children:_.transactions.length>0?_.transactions.map(e=>{let t=_.categories.find(t=>t.id===e.category);return(0,a.jsxs)(u.Hj,{children:[(0,a.jsx)(u.nA,{children:(0,d.GP)((0,l.H)(e.date),"dd/MM/yyyy",{locale:i.F})}),(0,a.jsx)(u.nA,{children:e.description}),(0,a.jsx)(u.nA,{children:(null==t?void 0:t.name)||"N/A"}),(0,a.jsx)(u.nA,{className:"text-right font-medium ".concat(e.amount<0?"text-destructive":"text-green-600"),children:E(e.amount)})]},e.id)}):(0,a.jsx)(u.Hj,{children:(0,a.jsx)(u.nA,{colSpan:4,className:"h-24 text-center",children:"Nenhuma transa\xe7\xe3o neste per\xedodo."})})})]})})]})]})]})},{})]}):(0,a.jsxs)("div",{className:"flex flex-col justify-center items-center h-screen text-center p-4",children:[(0,a.jsx)(b.A,{className:"h-16 w-16 mb-4 text-muted-foreground"}),(0,a.jsx)("h1",{className:"text-2xl font-bold mb-2",children:"Nenhum dado para o relat\xf3rio"}),(0,a.jsx)("p",{className:"text-muted-foreground",children:"Volte para o dashboard e gere um relat\xf3rio para visualiz\xe1-lo aqui."}),(0,a.jsx)(k.$,{onClick:()=>r.push("/dashboard"),className:"mt-4",children:"Voltar para o Dashboard"})]})}function G(){return(0,a.jsx)(s.Suspense,{fallback:(0,a.jsxs)("div",{className:"flex flex-col min-h-screen w-full items-center justify-center bg-background p-4 text-center",children:[(0,a.jsx)(g.A,{className:"h-12 w-12 animate-spin text-primary mb-4"}),(0,a.jsx)("h1",{className:"text-2xl font-semibold mb-2",children:"Preparando o relat\xf3rio..."})]}),children:(0,a.jsx)(S,{})})}},24355:(e,t,r)=>{"use strict";r.d(t,{$_:()=>C,$x:()=>N,AF:()=>g,Ah:()=>c,BH:()=>w,D:()=>y,DX:()=>j,Eg:()=>h,I0:()=>f,K7:()=>m,NN:()=>R,TO:()=>v,Uw:()=>p,Wm:()=>_,XH:()=>k,__:()=>P,bW:()=>i,m:()=>b,oV:()=>x,rr:()=>A,st:()=>u});var a=r(67039),s=r(35317),n=r(84713),o=r(19164),l=r(74641);let d=e=>{let t={...e};for(let e in t)t[e]instanceof s.Dc&&(t[e]=t[e].toDate());return t};async function i(e){let t=(0,s.rJ)(a.db,"users/".concat(e,"/categories")),r=(0,s.P)(t);return(await (0,s.GG)(r)).docs.map(e=>({id:e.id,...e.data()}))}async function c(e,t){let r=(0,s.rJ)(a.db,"users/".concat(e,"/categories"));return(await (0,s.gS)(r,t)).id}async function u(e,t,r){let n=(0,s.H9)(a.db,"users/".concat(e,"/categories"),t);await (0,s.mZ)(n,r)}async function m(e,t){let r=(0,s.H9)(a.db,"users/".concat(e,"/categories"),t);await (0,s.kd)(r)}async function f(e){let t=(0,s.rJ)(a.db,"users/".concat(e,"/transactions")),r=(0,s.P)(t);return(await (0,s.GG)(r)).docs.map(e=>({id:e.id,...d(e.data())}))}async function x(e,t,r){let o=(0,s.rJ)(a.db,"users/".concat(e,"/transactions")),l=(0,s.P)(o,(0,s._M)("date",">=",(0,n.GP)(t,"yyyy-MM-dd")),(0,s._M)("date","<=",(0,n.GP)(r,"yyyy-MM-dd")));return(await (0,s.GG)(l)).docs.map(e=>({id:e.id,...d(e.data())}))}async function h(e,t){let r=(0,s.rJ)(a.db,"users/".concat(e,"/transactions")),n=t.map(e=>e.hash),o=Array.from({length:Math.ceil(n.length/30)},(e,t)=>n.slice(30*t,30*t+30)),l=new Set;for(let e of o){if(0===e.length)continue;let t=(0,s.P)(r,(0,s._M)("hash","in",e));(await (0,s.GG)(t)).forEach(e=>{l.add(e.data().hash)})}let i=t.filter(e=>!l.has(e.hash));if(0===i.length)return[];let c=(0,s.wP)(a.db),u=[];return i.forEach(t=>{let r=(0,s.H9)((0,s.rJ)(a.db,"users/".concat(e,"/transactions")));c.set(r,t),u.push({id:r.id,...d(t)})}),await c.commit(),u}async function g(e,t,r){let n=(0,s.H9)(a.db,"users/".concat(e,"/transactions"),t);await (0,s.mZ)(n,r)}async function p(e,t){let r=(0,s.H9)(a.db,"users/".concat(e,"/transactions"),t);await (0,s.kd)(r)}async function b(e){let t=(0,s.rJ)(a.db,"users/".concat(e,"/transactions")),r=await (0,s.GG)(t);if(r.empty)return;let n=(0,s.wP)(a.db);r.docs.forEach(e=>{n.delete(e.ref)}),await n.commit()}async function j(e){let t=(0,s.rJ)(a.db,"users/".concat(e,"/goals")),r=(0,s.P)(t);return(await (0,s.GG)(r)).docs.map(e=>({id:e.id,...d(e.data())}))}async function y(e,t){let r=(0,s.rJ)(a.db,"users/".concat(e,"/goals"));return(await (0,s.gS)(r,{...t,createdAt:(0,s.O5)()})).id}async function v(e,t,r){let n=(0,s.H9)(a.db,"users/".concat(e,"/goals"),t);await (0,s.mZ)(n,r)}async function N(e,t){let r=(0,s.H9)(a.db,"users/".concat(e,"/goals"),t);await (0,s.kd)(r)}async function w(e){let t=(0,s.rJ)(a.db,"users/".concat(e,"/budgets")),r=(0,s.P)(t);return(await (0,s.GG)(r)).docs.map(e=>({id:e.id,...d(e.data())}))}async function k(e,t){let r=(0,s.rJ)(a.db,"users/".concat(e,"/budgets"));return(await (0,s.gS)(r,t)).id}async function A(e,t,r){let n=(0,s.H9)(a.db,"users/".concat(e,"/budgets"),t);await (0,s.mZ)(n,r)}async function R(e,t){let r=(0,s.H9)(a.db,"users/".concat(e,"/budgets"),t);await (0,s.kd)(r)}async function _(e,t,r){let d=new Date(r.replace(/-/g,"/")),i=(0,n.GP)(d,"yyyy-MM"),c=(0,s.rJ)(a.db,"users/".concat(e,"/budgets")),u=(0,s.P)(c,(0,s._M)("categoryId","==",t),(0,s._M)("month","==",i)),m=await (0,s.GG)(u);if(m.empty)return;let f=m.docs[0],x=(0,s.rJ)(a.db,"users/".concat(e,"/transactions")),h=(0,n.GP)((0,o.w)(d),"yyyy-MM-dd"),g=(0,n.GP)((0,l.p)(d),"yyyy-MM-dd"),p=(0,s.P)(x,(0,s._M)("category","==",t),(0,s._M)("date",">=",h),(0,s._M)("date","<=",g),(0,s._M)("amount","<",0)),b=(await (0,s.GG)(p)).docs.reduce((e,t)=>e+Math.abs(t.data().amount),0);await (0,s.mZ)(f.ref,{current:b})}async function C(e){let t=(0,s.rJ)(a.db,"users/".concat(e,"/achievements")),r=(0,s.P)(t);return(await (0,s.GG)(r)).docs.map(e=>({id:e.id,...d(e.data())}))}async function P(e,t){let r=(0,s.rJ)(a.db,"users/".concat(e,"/achievements"));return(await (0,s.gS)(r,{achievementId:t,unlockedAt:(0,s.O5)()})).id}},24944:(e,t,r)=>{"use strict";r.d(t,{k:()=>l});var a=r(95155),s=r(12115),n=r(55863),o=r(59434);let l=s.forwardRef((e,t)=>{let{className:r,value:s,indicatorClassName:l,...d}=e;return(0,a.jsx)(n.bL,{ref:t,className:(0,o.cn)("relative h-4 w-full overflow-hidden rounded-full bg-secondary",r),...d,children:(0,a.jsx)(n.C1,{className:(0,o.cn)("h-full w-full flex-1 bg-primary transition-all",l),style:{transform:"translateX(-".concat(100-(s||0),"%)")}})})});l.displayName=n.bL.displayName},26126:(e,t,r)=>{"use strict";r.d(t,{E:()=>l});var a=r(95155);r(12115);var s=r(74466),n=r(59434);let o=(0,s.F)("inline-flex items-center rounded-full border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2",{variants:{variant:{default:"border-transparent bg-primary text-primary-foreground hover:bg-primary/80",secondary:"border-transparent bg-secondary text-secondary-foreground hover:bg-secondary/80",destructive:"border-transparent bg-destructive text-destructive-foreground hover:bg-destructive/80",outline:"text-foreground"}},defaultVariants:{variant:"default"}});function l(e){let{className:t,variant:r,...s}=e;return(0,a.jsx)("div",{className:(0,n.cn)(o({variant:r}),t),...s})}},27600:(e,t,r)=>{"use strict";r.d(t,{A:()=>u,O:()=>c});var a=r(95155),s=r(12115),n=r(93004),o=r(67039),l=r(35695),d=r(57383);let i=(0,s.createContext)(void 0);function c(e){let{children:t}=e,[r,c]=(0,s.useState)(null),[u,m]=(0,s.useState)(!0),f=(0,l.useRouter)();(0,s.useEffect)(()=>{let e=(0,n.hg)(o.j,async e=>{if(c(e),e){let t=await e.getIdToken();d.A.set("firebaseIdToken",t,{path:"/"})}else d.A.remove("firebaseIdToken",{path:"/"});m(!1)});return()=>e()},[]);let x=async e=>{let{email:t,password:r}=e;return(await (0,n.x9)(o.j,t,r)).user},h=async e=>{let{name:t,email:r,password:a}=e;return(await (0,n.eJ)(o.j,r,a)).user},g=async()=>{await (0,n.CI)(o.j),f.push("/login")};return(0,a.jsx)(i.Provider,{value:{user:r,loading:u,login:x,signup:h,logout:g},children:t})}function u(){let e=(0,s.useContext)(i);if(void 0===e)throw Error("useAuth must be used within an AuthProvider");return e}},28039:(e,t,r)=>{"use strict";r.d(t,{b:()=>y});var a=r(95155),s=r(12115),n=r(83540),o=r(58995),l=r(94517),d=r(79133),i=r(54811),c=r(24026),u=r(59434);let m={light:"",dark:".dark"},f=s.createContext(null);function x(){let e=s.useContext(f);if(!e)throw Error("useChart must be used within a <ChartContainer />");return e}let h=s.forwardRef((e,t)=>{let{id:r,className:o,children:l,config:d,...i}=e,c=s.useId(),m="chart-".concat(r||c.replace(/:/g,""));return(0,a.jsx)(f.Provider,{value:{config:d},children:(0,a.jsxs)("div",{"data-chart":m,ref:t,className:(0,u.cn)("flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none",o),...i,children:[(0,a.jsx)(g,{id:m,config:d}),(0,a.jsx)(n.u,{children:l})]})})});h.displayName="Chart";let g=e=>{let{id:t,config:r}=e,s=Object.entries(r).filter(e=>{let[,t]=e;return t.theme||t.color});return s.length?(0,a.jsx)("style",{dangerouslySetInnerHTML:{__html:Object.entries(m).map(e=>{let[r,a]=e;return"\n".concat(a," [data-chart=").concat(t,"] {\n").concat(s.map(e=>{var t;let[a,s]=e,n=(null==(t=s.theme)?void 0:t[r])||s.color;return n?"  --color-".concat(a,": ").concat(n,";"):null}).join("\n"),"\n}\n")}).join("\n")}}):null};l.m;let p=s.forwardRef((e,t)=>{let{active:r,payload:n,className:o,indicator:l="dot",hideLabel:d=!1,hideIndicator:i=!1,label:c,labelFormatter:m,labelClassName:f,formatter:h,color:g,nameKey:p,labelKey:j}=e,{config:y}=x(),v=s.useMemo(()=>{var e;if(d||!(null==n?void 0:n.length))return null;let[t]=n,r="".concat(j||t.dataKey||t.name||"value"),s=b(y,t,r),o=j||"string"!=typeof c?null==s?void 0:s.label:(null==(e=y[c])?void 0:e.label)||c;return m?(0,a.jsx)("div",{className:(0,u.cn)("font-medium",f),children:m(o,n)}):o?(0,a.jsx)("div",{className:(0,u.cn)("font-medium",f),children:o}):null},[c,m,n,d,f,y,j]);if(!r||!(null==n?void 0:n.length))return null;let N=1===n.length&&"dot"!==l;return(0,a.jsxs)("div",{ref:t,className:(0,u.cn)("grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl",o),children:[N?null:v,(0,a.jsx)("div",{className:"grid gap-1.5",children:n.map((e,t)=>{let r="".concat(p||e.name||e.dataKey||"value"),s=b(y,e,r),n=g||e.payload.fill||e.color;return(0,a.jsx)("div",{className:(0,u.cn)("flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground","dot"===l&&"items-center"),children:h&&(null==e?void 0:e.value)!==void 0&&e.name?h(e.value,e.name,e,t,e.payload):(0,a.jsxs)(a.Fragment,{children:[(null==s?void 0:s.icon)?(0,a.jsx)(s.icon,{}):!i&&(0,a.jsx)("div",{className:(0,u.cn)("shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]",{"h-2.5 w-2.5":"dot"===l,"w-1":"line"===l,"w-0 border-[1.5px] border-dashed bg-transparent":"dashed"===l,"my-0.5":N&&"dashed"===l}),style:{"--color-bg":n,"--color-border":n}}),(0,a.jsxs)("div",{className:(0,u.cn)("flex flex-1 justify-between leading-none",N?"items-end":"items-center"),children:[(0,a.jsxs)("div",{className:"grid gap-1.5",children:[N?v:null,(0,a.jsx)("span",{className:"text-muted-foreground",children:(null==s?void 0:s.label)||e.name})]}),e.value&&(0,a.jsx)("span",{className:"font-mono font-medium tabular-nums text-foreground",children:e.value.toLocaleString()})]})]})},e.dataKey)})})]})});function b(e,t,r){if("object"!=typeof t||null===t)return;let a="payload"in t&&"object"==typeof t.payload&&null!==t.payload?t.payload:void 0,s=r;return r in t&&"string"==typeof t[r]?s=t[r]:a&&r in a&&"string"==typeof a[r]&&(s=a[r]),s in e?e[s]:e[r]}p.displayName="ChartTooltip",c.s,s.forwardRef((e,t)=>{let{className:r,hideIcon:s=!1,payload:n,verticalAlign:o="bottom",nameKey:l}=e,{config:d}=x();return(null==n?void 0:n.length)?(0,a.jsx)("div",{ref:t,className:(0,u.cn)("flex items-center justify-center gap-4","top"===o?"pb-3":"pt-3",r),children:n.map(e=>{let t="".concat(l||e.dataKey||"value"),r=b(d,e,t);return(0,a.jsxs)("div",{className:(0,u.cn)("flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground"),children:[(null==r?void 0:r.icon)&&!s?(0,a.jsx)(r.icon,{}):(0,a.jsx)("div",{className:"h-2 w-2 shrink-0 rounded-[2px]",style:{backgroundColor:e.color}}),null==r?void 0:r.label]},e.value)})}):null}).displayName="ChartLegend";var j=r(66695);function y(e){let{transactions:t,categories:r}=e,c=s.useMemo(()=>{let e=t.reduce((e,t)=>{if(t.category&&t.amount<0){let r=t.category;e[r]=(e[r]||0)+Math.abs(t.amount)}return e},{});return Object.keys(e).map(t=>{let a=r.find(e=>e.id===t);return{category:(null==a?void 0:a.name)||"Desconhecida",amount:e[t],fill:(null==a?void 0:a.color)||"hsl(var(--muted-foreground))",icon:null==a?void 0:a.icon}})},[t,r]),u=s.useMemo(()=>{let e={};return c.forEach(t=>{e[t.category]={label:t.category,color:t.fill,icon:t.icon}}),e},[c]);return 0===c.length?(0,a.jsxs)("div",{className:"flex h-[250px] w-full flex-col items-center justify-center gap-2 text-center",children:[(0,a.jsx)(j.BT,{children:"Nenhum dado de despesa para exibir."}),(0,a.jsx)("p",{className:"text-sm text-muted-foreground",children:"Tente ajustar o per\xedodo ou os filtros."})]}):(0,a.jsx)(h,{config:u,className:"mx-auto aspect-square h-[250px]",children:(0,a.jsx)(n.u,{width:"100%",height:"100%",children:(0,a.jsxs)(o.r,{children:[(0,a.jsx)(l.m,{cursor:!1,content:(0,a.jsx)(p,{hideLabel:!0,indicator:"dot",formatter:(e,t,r)=>{let s=e.toLocaleString("pt-BR",{style:"currency",currency:"BRL"});return(0,a.jsxs)("div",{className:"flex flex-col",children:[(0,a.jsx)("span",{className:"font-medium",children:r.payload.category}),(0,a.jsx)("span",{className:"text-foreground",children:s})]})}})}),(0,a.jsx)(d.F,{data:c,dataKey:"amount",nameKey:"category",innerRadius:60,strokeWidth:5,paddingAngle:2,children:c.map((e,t)=>(0,a.jsx)(i.f,{fill:e.fill,className:"focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2"},"cell-".concat(t)))})]})})})}},30285:(e,t,r)=>{"use strict";r.d(t,{$:()=>i,r:()=>d});var a=r(95155),s=r(12115),n=r(66634),o=r(74466),l=r(59434);let d=(0,o.F)("inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0",{variants:{variant:{default:"bg-primary text-primary-foreground hover:bg-primary/90",destructive:"bg-destructive text-destructive-foreground hover:bg-destructive/90",outline:"border border-input bg-background hover:bg-accent hover:text-accent-foreground",secondary:"bg-secondary text-secondary-foreground hover:bg-secondary/80",ghost:"hover:bg-accent hover:text-accent-foreground",link:"text-primary underline-offset-4 hover:underline"},size:{default:"h-10 px-4 py-2",sm:"h-9 rounded-md px-3",lg:"h-11 rounded-md px-8",icon:"h-10 w-10"}},defaultVariants:{variant:"default",size:"default"}}),i=s.forwardRef((e,t)=>{let{className:r,variant:s,size:o,asChild:i=!1,...c}=e,u=i?n.DX:"button";return(0,a.jsx)(u,{className:(0,l.cn)(d({variant:s,size:o,className:r})),ref:t,...c})});i.displayName="Button"},36370:(e,t,r)=>{Promise.resolve().then(r.bind(r,16127))},59434:(e,t,r)=>{"use strict";r.d(t,{cn:()=>n});var a=r(52596),s=r(39688);function n(){for(var e=arguments.length,t=Array(e),r=0;r<e;r++)t[r]=arguments[r];return(0,s.QP)((0,a.$)(t))}},66695:(e,t,r)=>{"use strict";r.d(t,{BT:()=>i,Wu:()=>c,ZB:()=>d,Zp:()=>o,aR:()=>l,wL:()=>u});var a=r(95155),s=r(12115),n=r(59434);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("rounded-lg border bg-card text-card-foreground shadow-sm",r),...s})});o.displayName="Card";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex flex-col space-y-1.5 p-6",r),...s})});l.displayName="CardHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-2xl font-semibold leading-none tracking-tight",r),...s})});d.displayName="CardTitle";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("text-sm text-muted-foreground",r),...s})});i.displayName="CardDescription";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("p-6 pt-0",r),...s})});c.displayName="CardContent";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{ref:t,className:(0,n.cn)("flex items-center p-6 pt-0",r),...s})});u.displayName="CardFooter"},67039:(e,t,r)=>{"use strict";r.d(t,{db:()=>d,j:()=>l});var a=r(23915),s=r(35317),n=r(93004);let o=(0,a.Dk)().length?(0,a.Sx)():(0,a.Wp)({projectId:"finsight-lxxmb",appId:"1:686617891887:web:2fffa88d7789119750a2da",storageBucket:"finsight-lxxmb.appspot.com",apiKey:"AIzaSyATjUtFWIOprS9ntjc9RGAsoCjdf5409U8",authDomain:"finsight-lxxmb.firebaseapp.com",messagingSenderId:"686617891887"}),l=(0,n.Nu)(o,{persistence:n.F0}),d=(0,s.aU)(o)},85127:(e,t,r)=>{"use strict";r.d(t,{A0:()=>l,BF:()=>d,Hj:()=>i,XI:()=>o,nA:()=>u,nd:()=>c});var a=r(95155),s=r(12115),n=r(59434);let o=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("div",{className:"relative w-full overflow-auto",children:(0,a.jsx)("table",{ref:t,className:(0,n.cn)("w-full caption-bottom text-sm",r),...s})})});o.displayName="Table";let l=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("thead",{ref:t,className:(0,n.cn)("[&_tr]:border-b",r),...s})});l.displayName="TableHeader";let d=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tbody",{ref:t,className:(0,n.cn)("[&_tr:last-child]:border-0",r),...s})});d.displayName="TableBody",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tfoot",{ref:t,className:(0,n.cn)("border-t bg-muted/50 font-medium [&>tr]:last:border-b-0",r),...s})}).displayName="TableFooter";let i=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("tr",{ref:t,className:(0,n.cn)("border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted",r),...s})});i.displayName="TableRow";let c=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("th",{ref:t,className:(0,n.cn)("h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0",r),...s})});c.displayName="TableHead";let u=s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("td",{ref:t,className:(0,n.cn)("p-4 align-middle [&:has([role=checkbox])]:pr-0",r),...s})});u.displayName="TableCell",s.forwardRef((e,t)=>{let{className:r,...s}=e;return(0,a.jsx)("caption",{ref:t,className:(0,n.cn)("mt-4 text-sm text-muted-foreground",r),...s})}).displayName="TableCaption"},98383:(e,t,r)=>{"use strict";r.d(t,{AI:()=>b,PO:()=>j,VQ:()=>p,ar:()=>y});var a=r(95155),s=r(14636),n=r(30285),o=r(18186),l=r(28328),d=r(19689),i=r(42625),c=r(13768),u=r(28274),m=r(31550),f=r(58260),x=r(2160),h=r(77070),g=r(99274);let p=[{name:"Home",icon:o.A},{name:"Car",icon:l.A},{name:"Food",icon:d.A},{name:"Shopping",icon:i.A},{name:"Entertainment",icon:c.A},{name:"Health",icon:u.A},{name:"Education",icon:m.A},{name:"Travel",icon:f.A},{name:"Gift",icon:x.A},{name:"Spending",icon:h.A},{name:"Other",icon:g.A}];function b(e){var t;return null==(t=p.find(t=>t.name===e))?void 0:t.icon}function j(e){return"string"==typeof e?p.find(t=>t.name===e):p.find(t=>t.icon===e)}function y(e){let{selectedIcon:t,setSelectedIcon:r}=e;return(0,a.jsxs)(s.AM,{children:[(0,a.jsx)(s.Wv,{asChild:!0,children:(0,a.jsxs)(n.$,{variant:"outline",className:"w-[280px] justify-start font-normal",children:[(0,a.jsx)(t,{className:"mr-2 h-4 w-4"}),"Selecione um \xedcone"]})}),(0,a.jsx)(s.hl,{className:"w-auto p-0",children:(0,a.jsx)("div",{className:"grid grid-cols-5 gap-2 p-2",children:p.map(e=>{let{icon:s,name:o}=e;return(0,a.jsx)(n.$,{variant:"ghost",size:"icon",onClick:()=>r(s),className:t===s?"bg-accent text-accent-foreground":"",children:(0,a.jsx)(s,{className:"h-5 w-5"})},o)})})})]})}}},e=>{var t=t=>e(e.s=t);e.O(0,[992,644,930,316,522,918,111,587,995,450,441,684,358],()=>t(36370)),_N_E=e.O()}]);